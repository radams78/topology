\newcommand{\id}[1]{\ensuremath{\mathrm{id}_{#1}}}
\newcommand{\finsubseteq}{\ensuremath{\subseteq^{\mathrm{fin}}}}
\newcommand{\dom}{\ensuremath{\operatorname{dom}}}
\newcommand{\ran}{\ensuremath{\operatorname{ran}}}

\chapter{Set Theory}

\section{Primitive Terms}

Let there be \emph{sets}.

Given sets $A$, $B$, let there be \emph{functions} from $A$ to $B$.
We write $f : A \rightarrow B$ iff $f$ is a function from $A$ to $B$, and call $A$ the \emph{domain} of $f$ and $B$ the \emph{codomain} of $f$.

Given sets $A$, $B$, $C$ and functions $f : A \rightarrow B$ and $g : B \rightarrow C$, let there be a function $g \circ f : A \rightarrow C$, the \emph{composite} of $f$ and $g$.

\begin{ax}[Associativity]
For any functions $f : A \rightarrow B$, $g : B \rightarrow C$ and $h : C \rightarrow D$, we have $h \circ (g \circ f) = (h \circ g) \circ f : A \rightarrow D$.
\end{ax}

\begin{ax}[Identity Function]
  For any set $A$, there exists a function $\id{A} : A \rightarrow A$, the \emph{identity} function on $A$, such that:
  \begin{description}
    \item[Left Unit Law]
    for every set $X$ and function $f : X \rightarrow A$ we have $\id{A} \circ f = f$.
    \item[Right Unit Law]
    for every set $X$ and function $f : A \rightarrow X$ we have $f \circ \id{A} = f$.
  \end{description}
\end{ax}

\begin{ax}[Product]
  For any sets $A$ and $B$, there exists a set $A \times B$, the \emph{product} of $A$ and $B$, and functions $\pi_1 : A \times B \rightarrow A$ and $\pi_2 : A \times B \rightarrow B$, the \emph{projections}, such that, for every set $X$ and functions $f : X \rightarrow A$ and $g : X \rightarrow B$, there exists a unique function $\langle f, g \rangle : X \rightarrow A \times B$ such that $\pi_1 \circ \langle f,g \rangle = f$ and $\pi_2 \circ \langle f,g \rangle = g$.
\end{ax}

\begin{ax}[Power Set]
  For any set $A$, there exists a set $\mathcal{P} A$, the \emph{power set} of $A$; a set $Memb(A)$, and a function $\epsilon_A : Memb(A) \rightarrow A \times \mathcal{P} A$ such that, for sets $B$, $C$ and injective function $R : C \rightarrowtail A \times B$, there exists a unique function $\chi_R : B \rightarrow \mathcal{P} A$ such that
  there exists $p : C \rightarrow Memb(A)$ such that:
  \begin{itemize}
    \item
    $(\id{A} \times \chi_R) \circ R = \epsilon_A \circ p$
    \item
    for any set $X$ and functions $x : X \rightarrow Memb(A)$ and $y : X \rightarrow A \times B$, there exists a unique $m : X \rightarrow C$ such that $p \circ m = x$ and $R \circ m = y$
  \end{itemize}
\end{ax}

\begin{ax}[Strong Extensionality]
  Let $f, g : A \rightarrow B$. If, for all $x : 1 \rightarrow A$, we have $f \circ x = g \circ x$, then $f = g$.
\end{ax}

\section{Unions}

\begin{prop}
  \label{prop:set_theory:unions}
  Let $X$ be a set and $U \subseteq X$ and $\mathcal{B} \subseteq \mathcal{P} X$. Then the following are equivalent:
  \begin{enumerate}
    \item there exists $\mathcal{B}_0 \subseteq \mathcal{B}$ such that $U = \bigcup \mathcal{B}_0$
    \item for all $x$, we have $x \in U$ iff there exists $B \in \mathcal{B}$ such that $x \in B \subseteq U$
  \end{enumerate}
\end{prop}

\begin{proof}
  \pf
  \step{<1>1}{$1 \Rightarrow 2$}
  \begin{proof}
    \step{<2>1}{\assume{1}}
    \step{<2>2}{\pick\ $\mathcal{B}_0 \subseteq \mathcal{B}$ such that $U = \bigcup \mathcal{B}_0$}
    \step{<2>3}{If $x \in U$ then there exists $B \in \mathcal{B}_0$ such that $x \in B \subseteq U$}
    \step{<2>4}{If there exists $B \in \mathcal{B}$ such that $x \in B \subseteq U$ then $x \in U$}
  \end{proof}
  \step{<1>2}{$2 \Rightarrow 1$}
  \begin{proof}
    \step{<2>1}{\assume{2}}
    \step{<2>2}{\pflet{$\mathcal{B}_0 = \{ B \in \mathcal{B} : B \subseteq U \}$}}
    \step{<2>3}{For all $x \in U$, there exists $B \in \mathcal{B}_0$ such that $x \in B$}
    \step{<2>4}{For all $B \in \mathcal{B}_0$ and $x \in B$ we have $x \in U$}
  \end{proof}
  \qed
\end{proof}

\subsection{Covers}

\begin{df}[Cover]
  Let $X$ be a set and $\mathcal{A} \subseteq \mathcal{P} X$. Let $Y \subseteq X$. Then $\mathcal{A}$ is a \emph{cover} of $Y$, or \emph{covers} $Y$, iff $Y \subseteq \bigcup \mathcal{A}$.
\end{df}

\begin{df}[Subcover]
  Let $X$ be a set, $Y \subseteq X$, and $\mathcal{A} \subseteq \mathcal{P} X$ be a cover of $Y$. A \emph{subcover} of $\mathcal{A}$ is a subset $\mathcal{B} \subseteq \mathcal{A}$ that covers $Y$.
\end{df}

\subsection{The Finite Intersection Property}

\begin{df}[Finite Intersection Property]
  Let $X$ be a set and $\mathcal{C} \subseteq \mathcal{P} X$. Then $\mathcal{C}$ has the \emph{finite intersection property} iff, for all $C_1, \ldots, C_n \in \mathcal{C}$, the intersection $C_1 \cap \cdots \cap C_n$ is nonempty.
\end{df}

\section{Fixed Points}

\begin{df}[Fixed Point]
  Let $A$ be a set and $f : A \rightarrow A$. Then $a \in A$ is a \emph{fixed point} of $f$ iff $f(a) = a$.
\end{df}

\section{Saturated Sets}

\begin{df}[Saturated Set]
  Let $f : X \rightarrow Y$ and $A \subseteq X$. Then $A$ is \emph{saturated} w.r.t.~$f$ iff, for all $x \in A$ and $x' \in X$, if $f(x) = f(x')$ then $x' \in A$.
\end{df}

\begin{prop}
  Let $f : X \rightarrow Y$ and $A \subseteq X$. The following are equivalent:
  \begin{enumerate}
    \item $A$ is saturated
    \item $A = \inv{f}(B)$ for some $B \subseteq Y$
    \item $A = \inv{f}(f(A))$.
  \end{enumerate}
\end{prop}

\begin{proof}
  \pf\ Easy. \qed
\end{proof}

\chapter{Order Theory}

\begin{df}[Linear Continuum]
  A \emph{linear continuum} is a complete dense linearly ordered set with more than one element.
\end{df}
