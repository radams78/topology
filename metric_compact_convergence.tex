\section{The Topology of Compact Convergence}

\begin{df}[Topology of Compact Convegence]
  Let $Y$ be a metric space and $X$ a topological space. For $f : X \rightarrow Y$ a function, $C$ a compact subspace of $X$, and $\epsilon > 0$, let $B_C(f, \epsilon) = \{ g : X \rightarrow Y \mid \sup_{x \in C} d(f(x), g(x)) < \epsilon \}$. Then the sets $B_C(f, \epsilon)$ form a basis for a topology on $Y^X$, which we call the \emph{topology of compact convergence} or the \emph{topology of uniform convergence on compact sets}.

  We prove this forms a basis.
\end{df}

\begin{proof}
  \pf
  \step{<1>1}{Given $g \in B_C(f, \epsilon)$, we have $B_C(g, \delta) \subseteq B_C(f, \epsilon)$, where $\delta = \epsilon - \sup_{x \in C} d(f(x),g(x))$}
  \begin{proof}
    \step{<2>1}{\pflet{$g \in B_C(f, \epsilon)$}}
    \step{<2>2}{\pflet{$\delta = \epsilon - \sup_{x \in C} d(f(x),g(x))$}}
    \step{<2>3}{\pflet{$h \in B_C(g,\delta)$}}
    \step{<2>4}{$\sup_{x \in C} d(f(x),h(x)) < \epsilon$}
    \begin{proof}
      \pf
      \begin{align*}
        \sup_{x \in C} d(f(x),h(x)) & \leq \sup_{x \in C} d(f(x),g(x)) + \sup_{x \in C} d(g(x),h(x)) & (\text{Triangle Inequality}) \\
        & < \sup_{x \in C} d(f(x),g(x)) + \delta & (\text{\stepref{<2>3}}) \\
        & = \epsilon & (\text{\stepref{<2>2}})
      \end{align*}
    \end{proof}
  \end{proof}
  \step{<1>2}{For every $f \in Y^X$ we have $f \in B_\emptyset(f,1)$}
  \step{<1>3}{If $f \in B_C(g,\epsilon) \cap B_D(h,\delta)$, then there exists $\chi$ such that $f \in B_{C \cup D}(f, \chi) \subseteq B_C(g, \epsilon) \cap B_D(h, \delta)$}
  \begin{proof}
    \step{<2>1}{\pflet{$f \in B_C(g,\epsilon) \cap B_D(h,\delta)$}}
    \step{<2>2}{\pflet{$\chi = \min(\epsilon - \sup_{x \in C} d(f(x),g(x)), \delta - \sup_{x \in D}d(f(x),h(x)))$}}
    \step{<2>3}{$B_{C \cup D}(f, \chi) \subseteq B_C(g, \epsilon) \cap B_D(h, \delta)$}
    \begin{proof}
      \pf\ By \stepref{<1>1}
    \end{proof}
  \end{proof}
  \qedstep
  \begin{proof}
    \pf\ Lemma \ref{lm:topology:basis:generate}.
  \end{proof}
  \qed
\end{proof}

\begin{thm}
  Let $Y$ be a metric space and $X$ a topological space. Let $(f_n)$ be a sequence of functions from $X$ to $Y$. Then $f_n$ converges to $f$ under the topology of compact convergence iff, for every compact $C \subseteq X$, we have $f_n \restriction_C$ converges to $f \restriction_C$ uniformly.
\end{thm}

\begin{proof}
  \pf\ Immediate from definitions. \qed
\end{proof}

\begin{thm}
  Let $X$ be a compactly generated space and $Y$ a metric space. Then $\mathcal{C}(X, Y)$ is closed in $Y^X$ under the topology of compact convergence.
\end{thm}

\begin{proof}
  \pf
  \step{1}{\pflet{$f \in \overline{\mathcal{C}(X, Y)}$} \prove{$f$ is continuous.}}
  \step{2}{\pflet{$C \subseteq X$ be compact} \prove{$f \restriction_C : C \rightarrow Y$ is continuous.}}
  \step{3}{\pflet{$x \in C$ and $\epsilon > 0$} \prove{There exists a neighbourhood $U$ of $x$ in $C$ such that $f(U) \subseteq B(f(x), \epsilon)$}}
  \step{4}{\pick\ $g \in B_C(f, \epsilon / 2)$}
  \step{5}{\pick\ a neighbourhood $U$ of $x$ such that $g(U) \subseteq B(g(x), \epsilon / 2)$}
  \step{6}{$f(U \cap C) \subseteq B(f(x), \epsilon)$}
  \qedstep
  \begin{proof}
    \pf\ Proposition \ref{compactly_generated:continuous}.
  \end{proof}
  \qed
\end{proof}

\begin{cor}
  Let $X$ be a compactly generated space and $Y$ a metric space. If the sequence of continuous functions $f_n : X \rightarrow Y$ converges to $f$ is the topology of compact convergence, then $f$ is continuous.
\end{cor}
